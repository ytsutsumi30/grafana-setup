#!/bin/bash

# Grafanaç’°å¢ƒã®ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

case "$1" in
    "start")
        echo "ğŸš€ Grafanaç’°å¢ƒã‚’èµ·å‹•ã—ã¦ã„ã¾ã™..."
        docker-compose up -d
        echo "âœ… èµ·å‹•å®Œäº†!"
        echo "ğŸ“Š Grafana: http://localhost:3000 (admin/admin123)"
        echo "ğŸ“ˆ Prometheus: http://localhost:9090"
        ;;
    "stop")
        echo "ğŸ›‘ Grafanaç’°å¢ƒã‚’åœæ­¢ã—ã¦ã„ã¾ã™..."
        docker-compose down
        echo "âœ… åœæ­¢å®Œäº†!"
        ;;
    "restart")
        echo "ğŸ”„ Grafanaç’°å¢ƒã‚’å†èµ·å‹•ã—ã¦ã„ã¾ã™..."
        docker-compose restart
        echo "âœ… å†èµ·å‹•å®Œäº†!"
        ;;
    "logs")
        echo "ğŸ“‹ ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¾ã™ (Ctrl+C ã§çµ‚äº†)..."
        docker-compose logs -f
        ;;
    "status")
        echo "ğŸ“Š ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ³:"
        docker-compose ps
        ;;
    "clean")
        echo "ğŸ§¹ ç’°å¢ƒã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¦ã„ã¾ã™..."
        docker-compose down -v
        docker system prune -f
        echo "âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†!"
        ;;
    *)
        echo "ä½¿ç”¨æ–¹æ³•: $0 {start|stop|restart|logs|status|clean}"
        echo ""
        echo "ã‚³ãƒãƒ³ãƒ‰:"
        echo "  start   - Grafanaç’°å¢ƒã‚’èµ·å‹•"
        echo "  stop    - Grafanaç’°å¢ƒã‚’åœæ­¢"
        echo "  restart - Grafanaç’°å¢ƒã‚’å†èµ·å‹•"
        echo "  logs    - ãƒ­ã‚°ã‚’è¡¨ç¤º"
        echo "  status  - ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ³ã‚’è¡¨ç¤º"
        echo "  clean   - ç’°å¢ƒã‚’å®Œå…¨ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—"
        exit 1
        ;;
esac
